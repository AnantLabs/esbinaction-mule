<?xml version="1.0" encoding="UTF-8"?>
<mule:mule xmlns="http://www.springframework.org/schema/beans"
  xmlns:file="http://www.mulesource.org/schema/mule/file/2.0"
  xmlns:cxf="http://www.mulesource.org/schema/mule/cxf/2.0"
  xmlns:mule="http://www.mulesource.org/schema/mule/core/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:simple="http://www.mulesource.org/schema/mule/simple/2.0"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       http://www.mulesource.org/schema/mule/core/2.0 http://www.mulesource.org/schema/mule/core/2.0/mule.xsd
       http://www.mulesource.org/schema/mule/cxf/2.0 http://www.mulesource.org/schema/mule/cxf/2.0/mule-cxf.xsd">

  <bean name="CocServiceWebService"
    class="org.esb.opensource.coc.CoCServiceImpl">
    <property name="delegate" ref="CocServiceImpl" />
  </bean>
  <bean name="CocServiceImpl" class="org.esb.chapter7.wsdl.CocServiceImpl"
    init-method="init" />

  <cxf:connector name="ws-addressing" configurationLocation="cxf-config.xml"/>

  <mule:model name="cxf-ws-addressing">

    <!-- Calls directly to the service -->
    <mule:service name="cocService">
      <mule:inbound-router>
        <mule:inbound-endpoint address="cxf:http://127.0.1.1:60000/test" connector-ref="ws-addressing" >
          <mule:custom-transformer class="org.esb.chapter7.wsdl.WSAddressingTransformer"/>
        </mule:inbound-endpoint>
      </mule:inbound-router>
      <mule:component class="org.mule.providers.cxf.testmodels.Echo">
      </mule:component>
      <mule:outbound-router>
        <mule:outbound-pass-through-router>
          <mule:outbound-endpoint address="file://test_out"></mule:outbound-endpoint>
        </mule:outbound-pass-through-router>
      </mule:outbound-router>
    </mule:service>
  </mule:model>

</mule:mule>
